\input{inputs/format_header.tex}
\guidetitle{CDD user guide}{2016-04-13}


\begin{document}

\maketitle
\newcommand{\guidetoolname}{cdd}


\section{Introduction}
The Case Deletions Diagnostics (CDD) algorithm is a tool primarily used to identify influential components of the dataset, usually individuals. The CDD works by identifying groups in the data set and creating one new data set for each member of the group, where that member has been removed. The model is run once with each new data set. The PsN implementation of the CDD can take any column as base for the grouping and all rows with the same value in that column will be considered a group as long as no individual contain multiple values in that column.
One should take care that the grouping creates sensible individual records. PsN will renumber the ID column so that two individuals with the same ID will not end up next to each other.
Examples
\begin{verbatim}
cdd moxonidine.mod -case_column=1
cdd pheno.mod -case_column=AGE
\end{verbatim}

\section{Input and options}

\subsection{Required input}
A model file is required on the command-line.

\begin{optionlist}
\optdefault{case\_column}{name|number}
The column on which the case-deletion is done. You can either use the name of the column as specified in the \mbox{\$INPUT} record in the model file or you can use the column number in the \mbox{\$INPUT} record. Numbering starts with 1.

\nextopt
\end{optionlist}

\subsection{Optional input}

\begin{optionlist}
\optdefault{bins}{N}
Sets the number of databins, or cdd datasets, to use. If the number of unique values, or factors, in the case column is higher than N then one or more factors will be deleted in each cdd dataset. Specifying N as higher than the number of factors will have no effect. N is then reset to the number of factors. Default value = Number of unique values in the case column. 
\nextopt
\optname{xv}
Default true. Run the cross-validation step (-xv) or not (-no-xv). 
\nextopt
\optdefault{selection\_method}{random | consecutive}
Default consecutive. Specifies whether the factors selected for exclusion should be drawn randomly or consecutively from the datafile. 
\nextopt
\optdefault{outside\_n\_sd\_check}{X}
Default 2. Mark the runs with CS-CR outside X standard deviations of the PCA. 
\nextopt
\end{optionlist}

\subsection{Some important common PsN options}
There are many options that govern how PsN manages NONMEM runs, and
those options are common to all PsN programs that run NONMEM.
For a complete list see common\_options.pdf, 
or psn\_options -h on the commandline.
\input{inputs/basic_options.tex}
\begin{optionlist}
\optname{last\_est\_complete}
is optional and only applies with NONMEM7 and cdd option -xv. 
See common\_options.pdf for details.
\nextopt
\end{optionlist}

\subsection{cdd rplots}
\newcommand{\rplotsconditions}{
If option -rplots is set $>=1$, a plot with Covariance ratios
vs Cook scores for each case, e.g. ID, will be generated. 
The default cdd rplots template 
requires no special R libraries.
If no pdf is generated,
see the .Rout file in the main run directory for error messages.}
\input{inputs/rplots_section_body.tex}


\section{Known bugs/issues}

If NONMEM6 is used with the cdd and the S matrix is algorithmically singular (message in lst-file, checked also by sumo script) the Cook scores cannot  be trusted. The cdd does not check for this error. 

\end{document}
